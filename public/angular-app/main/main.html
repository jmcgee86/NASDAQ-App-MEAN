<h1>NASDAQ - MEAN App</h1>


<form name="search" ng-submit = "vm.search()">
  <input name="symbol" type="text" id="symbol" placeholder="search by stock symbol" ng-model="vm.symbol" ng-minlength="2" required> 
  <button type = "submit" class="btn btn-success">Search</button>
</form>

<div ng-hide="vm.isSubmitted" ng-if="vm.error" class="alert alert-danger" role="alert">
  {{ vm.error }}
</div>

<div ng-if="vm.isSubmitted">

    <h3>Information on {{ vm.stock.Name }}</h3>

    <p><small>{{ vm.stock.Symbol }}</small> </p>
    
    <p>Current Price: {{ vm.stock.LastSale | currency}}</p>
    <p>Market Cap: {{ vm.stock.MarketCap | number: fractionSize }}</p>
    <p ng-hide = "!vm.stock.IPOyear">IPO Year: {{ vm.stock.IPOyear }}</p>
    <p ng-hide = "!vm.stock.Industry">Industry: {{ vm.stock.Industry }}</p>
    <p><a href = "{{ vm.stock.SummaryQuote }}" target="_blank">More Information</a></p>

</div>

<br>
<button type = "submit" class = "btn btn-success" ng-click = "vm.showQueries()">Show Recent Searches</button>
 
<div ng-if = "vm.showQueriesSubmitted">
    <h3>Recent Searches:</h3>   
    <li ng-repeat = "stock in vm.stocks | orderBy: '-Queries[Queries.length - 1].createdOn'"><a ng-href="#!/stocks/{{ stock.Symbol }}">{{stock.Symbol}} | Search Date: {{stock.Queries[stock.Queries.length -1].createdOn | date}}</a></li>
        <!--<li ng-repeat = "stock in vm.stocks.Queries | orderBy: '-Queries.createdOn'"><a ng-href="#!/stocks/{{ stock.Symbol }}">{{stock.Symbol}} | Search Date: stock.Queries.createdOn | date}}</a></li>-->

</div>